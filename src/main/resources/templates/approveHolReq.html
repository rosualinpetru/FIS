<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <title>Holiday Requests</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <link href="/webjars/bootstrap/4.4.1-1/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
    <link rel='stylesheet' type='text/css' href='webjars/fullcalendar/4.3.1/core/main.css'/>
    <link rel='stylesheet' type='text/css' href='webjars/fullcalendar/4.3.1/daygrid/main.css'/>
    <link rel='stylesheet' type='text/css' href='css/approveHolReq.css'/>
    <link rel="icon" href="/images/favicon.png" type="image/icon type">
</head>
<body>
<div class="container-fluid h-100 p-0 m-0 ">
    <div class="row h-100 ">
        <div class="col h-75 ">
            <div id='calendar'></div>
        </div>
        <div class="col">
            <div class="row">
                <div id="requests">

                    <div th:each="i : ${pendingReq}" th:value="${i.getId()}">
                        <p class="holReq" th:id="${i.getId()}">
                            <b th:text="${i.getType()} + ':' "></b>
                            <i th:text="${i.getAccountReq().getEmployee().getName()}"></i>
                        </p>
                    </div>

                </div>
            </div>
            <div class="row">
                <div id="requestsInfo">
                    <div class="infoContainer" th:each="i : ${pendingReq}" th:id="${i.getId()} +'d'">
                        <h1 th:text="${i.getAccountReq().getEmployee().getName()}"></h1>
                        <p th:text="${i.getDescription()}"></p>
                        <button th:id="'acc'+${i.getId()}" class="res">accept</button>
                        <button th:id="'dec'+${i.getId()}" class="res">decline</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="/webjars/jquery/3.3.1/jquery.min.js"></script>
<script src="/webjars/bootstrap/4.4.1-1/js/bootstrap.min.js"></script>
<script type='text/javascript' src='/webjars/fullcalendar/4.3.1/core/main.js'></script>
<script type='text/javascript' src='/webjars/fullcalendar/4.3.1/daygrid/main.js'></script>
<script type='text/javascript' src='/webjars/fullcalendar/4.3.1/interaction/main.js'></script>
<script src="/js/calendar.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $(".infoContainer").hide();
        $('.holReq').click(
            function () {
                let myId = $(this).attr("id");
                $(".infoContainer").hide();
                $("#" + myId + 'd').show();

            });
        $('.res').click(
            function () {
                $.post("acceptReq", {
                    id: $(this).attr("id").replace('acc', '').replace('dec',''),
                    act:$(this).attr("id").slice(0,3)
                },function(){
                    document.location = '/pendingRequest';
                })
            })
    });
</script>
</body>
</html>
